# 5.- Casos prácticos
----------------------------------------------
## a) Versión de Nginx instalado.
![version](https://i.ibb.co/KGx4SXf/version-nginx.png)
------------------------------------

## b) Servicio asociado.
----------------------------------------

## c) Ficheros de configuración.
-------------------------------------------

El fichero de configuración por defecto de Nginx es nginx.conf

---------------------------------------------
## d) Página web por defecto:
![nginx_pagina](https://i.ibb.co/Y8tt6Wq/pagina-web.png)

---------------------------------------------------

## e) Virtual Hosting
Estas son nuestras páginas web:

![nginx_2](https://i.ibb.co/jrRLjxF/2.png)


![nginx_1](https://i.ibb.co/wWQCbdP/1.png)

Creamos ficheros web1 y web2 en /etc/nginx/sites-available
Podemos usar de plantilla default para hacer nuestros ficheros

![nginx_3](https://i.ibb.co/16YTvkn/3.png)

Ficheros:
![nginx_4](https://i.ibb.co/jy73vGv/4.png)

![nginx_5](https://i.ibb.co/HpMZc0j/5.png)

Comprobamos que esté bien la sintaxis con el siguiente comando:

![nginx_6](https://i.ibb.co/P6VkVMh/6.png)

Enlaces a sites-enabled:

![nginx_7](https://i.ibb.co/Fmqzhxp/7.png)

Si hay un error al ejecutar nginx -t, este comando lo puede solucionar:

![nginx_8](https://i.ibb.co/FsbTfJ1/8.png)

Configuramos los DNS en el cliente:
![nginx_9](https://i.ibb.co/9ZhdkKV/9.png)

Comprobamos que el cliente puede acceder a las páginas Web1 yWeb2:
![nginx_10](https://i.ibb.co/pxYYmk9/10.png)

![nginx_11](https://i.ibb.co/2MrXVv8/11.png)

------------------------------------------------------

## f) Autentificación, Autorización y Control de acceso
Para restringir el acceso tenemos que modificar el fichero de la siguiente manera:

**Modificación en Web1:**

![auten_1](https://i.ibb.co/qkxy5wd/auten1.png)

**Modificación en Web2:**
![auten_2](https://i.ibb.co/kycjHZy/auten2.png)

Comprobamos la sintaxis:

![auten_3](https://i.ibb.co/sVvs26F/auten3.png)

Reiniciamos el servicio:

![auten_4](https://i.ibb.co/Chcvgsq/auten4.png)

etc/hosts de los clientes:

![aunten_5](https://i.ibb.co/jyBMssS/auten5.png)

Nota:Para comprobar si funciona en externo o interno comento las líneas y para no tener que usar otra máquina.

**Comprobación de red interna:**

![auten_6](https://i.ibb.co/qR5C83k/auten6.png)

![auten_7](https://i.ibb.co/xg16vZ6/auten7.png)


**Comprobación de red externa:**

![auten_8](https://i.ibb.co/zxYy3Ry/auten8.png)

![auten_9](https://i.ibb.co/VSnvGrp/auten9.png)


## g) Autentificación, Autorización y Control de acceso

Creamos la carpeta privado

![privado1](https://i.ibb.co/qFzJphk/privado1.png)

Instalamos el siguiente paquete:

![privado2](https://i.ibb.co/hK8z5MG/privado2.png)


Creamos la carpeta donde guardan los usuarios:

![privado9](https://i.ibb.co/pf2w7XF/privado9.png)

Configuración del sitio virtual:

![privado6](https://i.ibb.co/0mf0LdR/privado6.png)

Comprobamos la sintaxis

![privado7](https://i.ibb.co/6HF5xRQ/privado7.png)


Comprobaciones:

![privado10](https://i.ibb.co/GCRLGqv/privado10.png)

![privado11](https://i.ibb.co/GPty3hr/privado11.png)

## h) Autentificación, Autorización y Control de acceso
Pedir autorización desde la red externa y no desde la interna.

Fichero de configuración:

![ulti1](https://i.ibb.co/xXNMGkF/ultimo1.png)

![ulti2](https://i.ibb.co/qp93w13/ultimo2.png)

Comprobación del cliente con red interna:

![ulti3](https://i.ibb.co/VV85fF6/ultimo-externo-sin-auten.png)

Comprobación del cliente con red externa

![ulti4](https://i.ibb.co/XYRXfrn/ultimo-externo.png)

## i)Seguridad

![1ssl](https://i.ibb.co/QJzw2Sg/ssl-1.png)

![2ssl](https://i.ibb.co/WtrzDFb/ssl-2.png)

![3ssl](https://i.ibb.co/xXmLSYk/ssl-3.png)

![4ssl](https://i.ibb.co/kHLnnZg/ssl-4.png)

![5ssl](https://i.ibb.co/QjptyBd/ssl-5.png)
